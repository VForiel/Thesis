# Agent Modification Log: ABCD Calibration Algorithm

**Date:** 2026.01.08  
**Session:** 02  
**Topic:** calibration-abcd

## Summary
Implemented a new ABCD-based calibration algorithm that iteratively samples four phase points per shifter across multiple loops, then performs a fine sweep to refine phases. Added Context wrapper and package exports; included a smoke test.

## Changes Made

### New
- `src/phise/modules/calibration/abcd.py`
  - `calibrate_abcd(ctx, n_loops, n_final_samples, plot, verbose, figsize, save_as)`
  - ABCD four-point estimation per shifter + final dense sweep
  - Returns dict with updated context, history, and final phase values

### Modified
- `src/phise/modules/calibration/__init__.py`
  - Export `calibrate_abcd`
- `src/phise/classes/context.py`
  - Import new function
  - Added wrapper `Context.calibrate_abcd(...)`
- `tmp/test_calibration_abcd.py`
  - Smoke test using 4-telescope VLTI setup and new algorithm

## Testing
- `python tmp/test_calibration_abcd.py` âœ“
  - Verifies new function runs, returns expected keys, shapes, and uses 4-telescope context.

## Notes
- Algorithm starts from zeroed shifters, runs `n_loops` ABCD passes, then a final fine sweep with `n_final_samples` points per shifter.
- Plotting uses log-scale metrics; optional `save_as` for saved figures.
